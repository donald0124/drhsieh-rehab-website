---
// 匯入 QA 元件
import QA from "./QA.astro";
---

<section id="patient-info">
    <h2 class="text-4xl font-bold text-center mb-10 text-heading">就診資訊</h2>

    <div
        class="info-banner"
        style="background-color: var(--color-primary-dark); color: white; padding: 1.5rem 2rem; border-radius: 8px; text-align: center; margin-bottom: 3rem; max-width: 800px; margin-left: auto; margin-right: auto;"
    >
        <h3 style="color: white; margin: 0; font-size: 1.5rem;">
            本診所一律採現場掛號，無需預約
        </h3>
        <p
            style="color: white; opacity: 0.9; margin: 0.5rem 0 0; font-size: 1.1rem;"
        >
            (初診請於門診時段結束前 20 分鐘報到)
        </p>
    </div>

    <h3 class="text-2xl font-bold text-primary-dark text-center mb-6 mt-10">
        門診時段
    </h3>
    <div class="schedule-table-wrapper">
        <table class="schedule-table schedule-table-complex">
            <thead>
                <tr>
                    <th>時段</th>
                    <th>一</th>
                    <th>二</th>
                    <th>三</th>
                    <th>四</th>
                    <th>五</th>
                    <th>六</th>
                    <th>日</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>上午<small>09:00-11:30</small></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong></td>
                    <td rowspan="3" style="vertical-align: middle;"
                        >全日<br />休診</td
                    >
                </tr>
                <tr>
                    <td>下午<small>14:30-17:00</small></td>
                    <td><strong>O</strong></td>
                    <td>
                        <a
                            href="https://www2.ndmctsgh.edu.tw/newwebreg/Register/Doctors?pos=5&DeptCode=311&DeptGroup=4"
                            target="_blank"
                            rel="noopener noreferrer"
                        >
                            三總<br />汀州
                        </a>
                    </td>
                    <td>休診</td>
                    <td>休診</td>
                    <td><strong>O</strong></td>
                    <td rowspan="2" style="vertical-align: middle;"
                        >下午<br />晚上<br />休診</td
                    >
                </tr>
                <tr>
                    <td>晚上<small>18:30-21:00</small></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong><small>(19:00 開始)</small></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong></td>
                    <td><strong>O</strong></td>
                </tr>
            </tbody>
        </table>
    </div>

    <h3 class="text-2xl font-bold text-primary-dark text-center mb-6 mt-10">
        復健治療時間
    </h3>
    <div class="schedule-table-simple-wrapper">
        <table class="schedule-table">
            <thead>
                <tr>
                    <th>時段</th>
                    <th>週一至週五</th>
                    <th>週六</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>全日</td>
                    <td
                        >08:30 – 21:30<br /><small
                            >(中午 12:30–14:00 休息)</small
                        ></td
                    >
                    <td>08:30 – 12:30</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h3 class="text-2xl font-bold text-primary-dark text-center mb-6 mt-16">
        交通與聯絡
    </h3>
    <div class="contact-grid">
        <div class="contact-info">
            <div class="note" style="margin-top: 2rem; text-align: left;">
                <h3 class="text-xl font-bold text-heading mb-4 mt-0">電話</h3>
                <p>
                    <a href="tel:0226718910">(02) 2671-8910</a>
                </p>
            </div>

            <div class="note" style="margin-top: 2rem; text-align: left;">
                <h3 class="text-xl font-bold text-heading mb-4 mt-0">
                    診所位置
                </h3>
                <p>
                    <a
                        href="https://maps.app.goo.gl/Uxc3HU9CcvCCTurx6"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        新北市三峽區中華路22號2樓
                    </a>
                </p>
                <ul style="padding-left: 1.5rem; margin: 0.5rem 0 0;">
                    <li>三峽黃昏市場附近、小北百貨隔壁</li>
                    <li>龍門社區大樓附設電梯，可搭至2樓</li>
                </ul>
            </div>

            <div class="note" style="margin-top: 2rem; text-align: left;">
                <h3 class="text-xl font-bold text-heading mb-4 mt-0">
                    交通方式
                </h3>
                <ul style="padding-left: 1.5rem; margin: 0;">
                    <li>
                        <strong>910公車：</strong>「中華路」站 (可經<strong
                            >捷運新埔、板橋、府中站</strong
                        >轉乘)
                    </li>
                    <li>
                        <strong>705、706公車：</strong>「礁溪里」站 (可經<strong
                            >捷運頂埔站</strong
                        >轉乘)
                    </li>
                    <li>附近有收費停車場</li>
                </ul>
            </div>
        </div>

        <div class="map-container">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3617.9766755253318!2d121.37238134060719!3d24.932864488726022!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34681bed818951bb%3A0xa0fcac84eec260d7!2z6Kyd5piO56aP5b6p5YGl56eR6Ki65omA!5e0!3m2!1szh-TW!2stw!4v1762579348594!5m2!1szh-TW!2stw"
                width="100%"
                height="450"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
            >
            </iframe>
        </div>
    </div>

    <QA />
</section>

<style>
    /* (5) 門診時間 (Schedule) */
    .schedule-table-wrapper {
        /* 關鍵：讓表格在手機上可以水平滾動 */
        overflow-x: auto;
        max-width: 100%;
    }

    .schedule-table {
        width: 100%;
        min-width: 450px;
        /* 確保表格內容不會擠壓得太難看 */
        border-collapse: collapse;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .schedule-table th,
    .schedule-table td {
        border: 1px solid var(--color-border);
        padding: 0.8rem;
        text-align: center;
    }

    .schedule-table th {
        background-color: var(--color-primary-light);
        color: var(--color-primary-dark);
        white-space: nowrap;
        /* 確保內容不換行 */
    }

    .schedule-table tbody tr:nth-of-type(even) {
        background-color: var(--color-gray-bg);
    }

    .schedule-table td:first-child {
        /* 第一欄 (時段) */
        font-weight: 600;
        background-color: var(--color-white);
    }

    .schedule-table td[rowspan] {
        /* --- NEW --- */
        /* 讓跨欄的儲存格內容垂直置中 */
        vertical-align: middle;
    }

    /*
    * ================================
    * (5.1) 門診時間 (Schedule) - 樣式優化
    * ================================
    */

    /* (1. 讓 "門診時段" 複雜表格更緊湊) */
    .schedule-table-complex th,
    .schedule-table-complex td {
        padding: 0.5rem 0.3rem;
        /* (縮小左右 padding) */
        white-space: nowrap;
        /* (標題"一""二""三" 保持不換行) */
    }

    /*
    * ▼▼▼ (關鍵：新增) ▼▼▼
    * * 1. 強制表格使用固定寬度演算法
    * 這會讓「一～日」的 7 欄寬度平均分配
    */
    .schedule-table-complex {
        table-layout: fixed;
    }

    /*
    * 2. 指定第一欄 (時段) 的寬度
    * 我們給它 30%，剩下 7 欄會自動均分 70%
    */
    .schedule-table-complex th:first-child,
    .schedule-table-complex td:first-child {
        width: 20%;
        /* (您可以調整 25% ~ 35%) */
    }

    /* (2. 讓 "復健時間" 簡單表格 100% 寬) */
    .schedule-table-simple-wrapper .schedule-table {
        min-width: 0;
        /* (移除 min-width) */
        width: 100%;
        /* (設為 100%) */
    }

    /* (3. 處理我們新增的 <small> 標籤) */
    .schedule-table td small {
        font-size: 0.85em;
        display: block;
        /* (關鍵：讓 small 換到下一行) */
        margin-top: 0.25rem;
        white-space: normal;
        /* (允許 "19:00 開始" 換行) */
    }

    /* (4. 讓第一欄 (時段) 的，並允許換行) */
    .schedule-table td:first-child {
        white-space: normal;
        /* (允許 "上午" 和 "時間" 換行) */
        vertical-align: middle;
        /* (讓 "上午" 和 "O" 對齊) */
    }

    /* (5. "O" 儲存格的樣式) */
    .schedule-table td strong {
        font-size: 1.3rem;
        color: var(--color-primary);
    }

    /* (6. "休診" 儲存格的樣式) */
    .schedule-table
        td:not(:first-child):not([rowspan]):not(:has(strong)):not(:has(a)) {
        color: #000000;
        font-size: 0.9em;
    }

    /* (7. 讓三總汀州連結換行) */
    .schedule-table td a {
        white-space: normal;
        text-decoration: underline;
    }

    /* (6) 聯絡我們 & 交通 (Contact) */
    .contact-grid {
        display: grid;
        grid-template-columns: 1fr;
        /* (手機) 1 欄 */
        gap: 2rem;
        max-width: var(--container-width);
        margin: 0 auto;
    }

    .contact-info p {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
    }

    .contact-info strong {
        color: var(--color-heading);
        margin-right: 0.5rem;
    }

    .contact-info h3 {
        margin-top: 2rem;
        margin-bottom: 0.5rem;
        border-bottom: 2px solid var(--color-primary);
        padding-bottom: 0.5rem;
        display: inline-block;
        text-align: left;
        /* --- UPDATED --- */
    }

    .contact-info ul {
        list-style: none;
        padding: 0;
    }

    /* --- NEW --- */
    /* (掛號/預約 提示) */
    .contact-info .note {
        font-size: 0.95rem;
        background-color: var(--color-white);
        padding: 1rem;
        border-radius: 8px;
        border-left: 5px solid var(--color-primary);
        line-height: 1.6;
        margin-top: 1rem;
    }

    .map-container {
        width: 100%;
        height: 350px;
        border-radius: 8px;
        overflow: hidden;
        /* 確保 iframe 圓角 */
        border: 1px solid var(--color-border);
    }

    .map-container iframe {
        width: 100%;
        height: 100%;
        border: 0;
    }
</style>
