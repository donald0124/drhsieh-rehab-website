---
// src/components/ServiceItem.astro
// 這是您的「樣板」(form)，負責單一治療項目的外觀
// 它會從 Services.astro 接收 props

interface Props {
  title: string; // 標題 (例如: "頭頸")
  icon?: string; // 圖示名稱
  tags: string[]; // 治療標籤 (例如: ["落枕", "肩頸痠痛"])
  symptoms: string[]; // 困擾列表 (例如: ["早上起床...", "嘴巴打開..."])
  
  // (選填) 延伸閱讀的文章列表
  relatedPosts?: {
    slug: string;
    title: string;
  }[];
}

const { title, icon = "general", tags, symptoms, relatedPosts } = Astro.props;
import ServiceIcon from './ServiceIcon.astro';
---

<details class="accordion-item bg-white rounded-lg shadow-md overflow-hidden border border-gray-100">
    <summary class="accordion-summary flex items-center w-full p-5 md:p-6 justify-between bg-primary-light hover:bg-blue-50 transition-colors duration-200 cursor-pointer list-none gap-4">
        <div class="flex items-center gap-3 md:gap-4">
            <div class="p-2 bg-white rounded-full shadow-sm text-primary">
                <ServiceIcon name={icon} class="w-6 h-6 md:w-7 md:h-7" />
            </div>
            <h3 class="text-xl md:text-2xl font-bold text-primary-dark m-0 tracking-wide">{title}</h3>
        </div>
        <svg class="accordion-icon w-6 h-6 text-primary transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
    </summary>
    
    <div class="accordion-content p-6 bg-white border-t border-gray-100">
        
        <div class="content-section mb-6">
            <div class="flex flex-wrap gap-2">
                {tags.map(tag => (
                    <span class="px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-primary-light hover:text-primary transition-colors duration-200">{tag}</span>
                ))}
            </div>
        </div>

        <div class="content-section mb-6">
            <h4 class="text-lg font-bold text-gray-800 mb-3 flex items-center gap-2">
                <span class="text-primary"></span> 您是否有這些困擾？
            </h4>
            <ul class="symptom-list space-y-2 pl-2">
                {symptoms.map(symptom => (
                    <li class="text-gray-600 flex items-start gap-2">
                        <span>{symptom}</span>
                    </li>
                ))}
            </ul>
        </div>

        {relatedPosts && relatedPosts.length > 0 && (
            <div class="content-section mt-6 pt-6 border-t border-gray-100">
                <h4 class="text-base font-bold text-gray-500 mb-3 uppercase tracking-wider">延伸閱讀</h4>
                <div class="grid gap-3 sm:grid-cols-2">
                    {relatedPosts.map(post => (
                        <a href={post.slug} class="group flex items-center gap-2 text-primary hover:text-primary-dark transition-colors duration-200">
                            <span class="opacity-50 group-hover:opacity-100 transition-opacity">→</span>
                            <span class="underline decoration-transparent group-hover:decoration-primary-dark underline-offset-4 transition-all">{post.title}</span>
                        </a>
                    ))}
                </div>
            </div>
        )}
    </div>
</details>

<style>
    .accordion-summary {
        list-style: none;
    }
    .accordion-summary::-webkit-details-marker {
        display: none;
    }
    .accordion-icon {
        width: 1.5rem;
        height: 1.5rem;
        flex-shrink: 0;  
        transform: rotate(0deg);
        transition: transform 0.3s ease-in-out;
    }
    details[open] > .accordion-summary .accordion-icon {
        transform: rotate(180deg);
    }
</style>